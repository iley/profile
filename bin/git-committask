#!/usr/bin/perl -w
use strict;
use Cwd qw(getcwd);

my $msg = shift or die 'Usage: git committask "message"';

my $dir = getcwd();
$dir =~ m{/statadhoc-(\d+)(?:/|$)} or die 'Cannot determine task number';
my $number= $1;

my $cmd = "git commit -m ' * [STATADHOC-$number] $msg'";
print "Executing $cmd";
system($cmd) == 0 or die "Could not execute $cmd";
