#!/usr/bin/perl

sub is_installed {
    my $res = system("command -v $_[0] >/dev/null 2>&1");
    return $res == 0;
}

my %title_fmt = (
    xterm => "-title '%s'",
    roxterm => "--title='%s'",
    'xfce4-terminal' => "--title '%s'"
);

for $term (qw(xfce4-terminal roxterm xterm)) {
    if (is_installed($term)) {
        if (@ARGV == 0) {
            system $term;
        } else {
            system "$term " . sprintf($title_fmt{$term}, join(' ', @ARGV));
        }
        last;
    }
}
